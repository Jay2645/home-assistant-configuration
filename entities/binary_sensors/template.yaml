platform: template
sensors:
  cuties_asleep:
    value_template: >-
      {{ (is_state('media_player.bedroom_speaker', 'playing') or is_state('media_player.bedroom_speaker', 'idle'))
         and states.media_player.bedroom_speaker.attributes.media_title == "Rain sounds" }}
    # 15 second delay to avoid false positives when server restarts
    delay_off:
      seconds: 15
  speakers_playing: 
    value_template: >-
      {{ is_state('media_player.bedroom_speaker', 'playing') 
         or is_state('media_player.office_speaker', 'playing')
         or is_state('media_player.bathroom_speaker', 'playing') }}
  cutie_home:
    value_template: >-
      {{ is_state('person.jay', 'home') 
         or is_state('person.michele', 'home') }}
  server_up:
    value_template: >-
      {{float(states.sensor.uptime.state) >= 1}}